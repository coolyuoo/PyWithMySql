version: "3.8"

services:
  db: # MySQL 資料庫
    image: mysql:8.0
    ports:
      - "4406:3306"            # 本機 4406 -> 容器 3306
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: testdb
      MYSQL_USER: testuser
      MYSQL_PASSWORD: testpass
    volumes:
      - "D:/docker/mysql:/var/lib/mysql"

  app: # Python 應用
    build: .
    ports:
      - "8000:8000"            # 本機 8000 -> 容器 8000
    depends_on:
      - db                     # 先啟動 db 再啟動 app
    command: ["python", "app.py"]
